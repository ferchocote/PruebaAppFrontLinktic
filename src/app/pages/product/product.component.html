<div class="card flex justify-content-center">
<a routerLink="/order" class="btn-link">Ir a Pedidos</a>
<br>

<!-- Botón para abrir el formulario de agregar producto -->
<button pButton type="button" label="Agregar Producto" class="p-button-success" (click)="displayPopup = true"></button>

<!-- Tabla de productos -->
<p-table [value]="products" [paginator]="true" [rows]="10" [responsive]="true" [scrollable]="true" [style]="{ 'margin-top': '20px' }">
  <ng-template pTemplate="header">
    <tr>
      <th>Nombre</th>
      <th>Descripción</th>
      <th>Precio</th>
      <th>Acciones</th>
    </tr>
  </ng-template>
  <ng-template pTemplate="body" let-product>
    <tr>
      <td>{{ product.name }}</td>
      <td>{{ product.description }}</td>
      <td>{{ product.price | currency }}</td>
      <td>
        <button pButton type="button" icon="pi pi-pencil" class="p-button-rounded p-button-info" (click)="editProduct(product)"></button>
        <button pButton type="button" icon="pi pi-trash" class="p-button-rounded p-button-danger" (click)="deleteProduct(product.id)"></button>
      </td>
    </tr>
  </ng-template>
</p-table>

<p-dialog #op1 header="Agregar producto" [modal]="true" [(visible)]="displayPopup" [ngClass]="{'custom-dialog': true}">

  <form [formGroup]="addProductForm" (ngSubmit)="onSubmit()">
    <div class="p-field">

    <div class="flex align-items-center gap-3 mb-3">
      <label for="username" class="font-semibold w-6rem">Nombre</label>
      <input pInputText id="name" formControlName="name" placeholder="Nombre del Producto" class="flex-auto" autocomplete="off" />
    </div>
    <div class="flex align-items-center gap-3 mb-5">
        <label for="email" class="font-semibold w-6rem">Descripción</label>
        <input pInputText id="description" formControlName="description" placeholder="Descripción del Producto" class="flex-auto" autocomplete="off" />
    </div>
    <div class="flex align-items-center gap-3 mb-5">
      <label for="email" class="font-semibold w-6rem">Precio</label>
      <input pInputText id="price" formControlName="price" placeholder="Precio" type="number" class="flex-auto" autocomplete="off" />
    </div>
    <div class="flex align-items-center gap-3 mb-5">
      <label for="email" class="font-semibold w-6rem">Cantidad</label>
      <input pInputText id="stockQuantity" formControlName="stockQuantity" placeholder="Cantidad" type="number" class="flex-auto" autocomplete="off" />
    </div>

    <div class="flex justify-content-end gap-2">
      <p-button label="Cerrar" severity="secondary" (onClick)="displayPopup = false" />
      <p-button label="Guardar" type="submit" [disabled]="addProductForm.invalid" />
    </div>
  </div>
  </form>
</p-dialog>

<p-dialog #op2 header="Actualizar producto" [modal]="true" [(visible)]="displayPopup2" [ngClass]="{'custom-dialog': true}">

  <form [formGroup]="updateProductForm" (ngSubmit)="onUpdateSubmit()">
    <div class="p-field">

    <div class="flex align-items-center gap-3 mb-3">
      <label for="username" class="font-semibold w-6rem">Nombre</label>
      <input pInputText id="name" formControlName="name" placeholder="Nombre del Producto" class="flex-auto" autocomplete="off" />
    </div>
    <div class="flex align-items-center gap-3 mb-5">
        <label for="email" class="font-semibold w-6rem">Descripción</label>
        <input pInputText id="description" formControlName="description" placeholder="Descripción del Producto" class="flex-auto" autocomplete="off" />
    </div>
    <div class="flex align-items-center gap-3 mb-5">
      <label for="email" class="font-semibold w-6rem">Precio</label>
      <input pInputText id="price" formControlName="price" placeholder="Precio" type="number" class="flex-auto" autocomplete="off" />
    </div>
    <div class="flex align-items-center gap-3 mb-5">
      <label for="email" class="font-semibold w-6rem">Cantidad</label>
      <input pInputText id="stockQuantity" formControlName="stockQuantity" placeholder="Cantidad" type="number" class="flex-auto" autocomplete="off" />
    </div>

    <div class="flex justify-content-end gap-2">
      <p-button label="Cerrar" severity="secondary" (onClick)="displayPopup2 = false" />
      <p-button label="Guardar" type="submit" [disabled]="updateProductForm.invalid" />
    </div>
  </div>
  </form>
</p-dialog>

</div>
